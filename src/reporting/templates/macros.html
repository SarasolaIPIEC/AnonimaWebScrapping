{% macro chips(cba_flag, brand_tier) -%}
  {%- set chips = [] -%}
  {%- if cba_flag in ['si','s√≠','s','1',true] -%}
    {%- set _ = chips.append('<span class="chip chip-cba">CBA</span>') -%}
  {%- endif -%}
  {%- if brand_tier in ['premium','estandar','segunda'] -%}
    {%- set label = {'premium':'Premium','estandar':'Estandar','segunda':'Segunda'}[brand_tier] -%}
    {%- set _ = chips.append('<span class="chip chip-tier">' ~ label ~ '</span>') -%}
  {%- endif -%}
  {{- chips|join(' ')|safe -}}
{%- endmacro %}

{% macro price_cell(price_list, price_final) -%}
  {%- if price_list and price_list > price_final -%}
    <span class="orig">{{ price_list|currency }}</span> <span class="promo">{{ price_final|currency }}</span>
  {%- else -%}
    {{ price_final|currency }}
  {%- endif -%}
{%- endmacro %}

